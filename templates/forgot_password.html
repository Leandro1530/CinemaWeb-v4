{% extends "base.html" %}
{% block title %}Recuperar contrase√±a | Cinema3D{% endblock %}

{% block head_extras %}
<style>
  /* ===== Recuperar contrase√±a moderno ===== */
  .forgot-wrap{
    min-height: calc(100dvh - 96px - 80px);
    display:flex; align-items:center; justify-content:center;
    padding: clamp(16px, 3vw, 28px);
  }
  .forgot-card{
    width:min(440px, 100%);
    background: linear-gradient(180deg, rgba(255,255,255,.04), rgba(255,255,255,.02));
    border:1px solid rgba(255,255,255,.08);
    border-radius: 20px;
    box-shadow: var(--shadow-sm);
    backdrop-filter: blur(14px);
    padding: clamp(18px, 3vw, 28px);
    animation: fgFade .35s ease both;
  }
  @keyframes fgFade{from{opacity:0; transform:translateY(8px)} to{opacity:1; transform:none}}

  .forgot-logo{
    width:84px; height:84px; border-radius:18px; margin:0 auto 14px;
    display:grid; place-items:center;
    background: linear-gradient(135deg,#f59e0b,#d97706);
    box-shadow: 0 14px 34px rgba(245,158,11,.35);
  }
  .forgot-title{ margin:0; text-align:center; font-weight:800; font-size: clamp(1.4rem,2.2vw,1.9rem); }
  .forgot-sub{ text-align:center; color:var(--muted); margin:.35rem 0 0; }

  .form{ display:grid; gap:14px; margin-top: clamp(16px, 2.4vw, 22px); }

  .field{ display:grid; gap:.45rem; }
  .field label{ font-weight:600; color:#cfd6e5; }
  .control{
    position:relative;
    display:flex; align-items:center;
    background:#0f1428; border:1px solid rgba(255,255,255,.10);
    border-radius:12px; padding: 0 .8rem;
    transition: border-color .2s ease, background .2s ease, box-shadow .2s ease;
  }
  .control:focus-within{
    border-color:#f59e0b; background:#121936;
    box-shadow:0 0 0 3px rgba(245,158,11,.18);
  }
  .control .icon{ margin-right:.55rem; opacity:.9 }
  .control input{
    flex:1; height:44px; border:0; outline:0; background:transparent;
    color:var(--text); font-size:.98rem;
  }

  .error-box{
    background: rgba(239,68,68,.10);
    border:1px solid rgba(239,68,68,.28);
    color:#fca5a5;
    border-radius:12px; padding:.8rem 1rem; margin-top:1rem;
  }
  .error-box ul{ margin:0; padding-left:1.2rem; }

  .success-box{
    background: rgba(34,197,94,.10);
    border:1px solid rgba(34,197,94,.28);
    color:#86efac;
    border-radius:12px; padding:.8rem 1rem; margin-top:1rem;
  }

  /* ===== Botones de acci√≥n ===== */
  .actions{
    display:flex;
    gap:.75rem;
    margin-top:.3rem;
  }

  .actions .btn-primary,
  .actions .btn-ghost{
    display:inline-flex;
    align-items:center;
    justify-content:center;
    height:48px;
    padding:0 1rem;
    border-radius:12px;
    font-weight:700;
    text-decoration:none;
    line-height:1;
    box-sizing:border-box;
    flex:1;
  }

  /* Estilo bot√≥n primario */
  .actions .btn-primary{
    background: linear-gradient(135deg,#f59e0b,#d97706);
    color:#fff;
    border:0;
    box-shadow:0 10px 24px rgba(245,158,11,.25);
    transition:transform .15s ease, box-shadow .15s ease, filter .15s ease;
  }
  .actions .btn-primary:hover{ transform:translateY(-1px); filter:brightness(1.03); }

  /* Estilo bot√≥n ghost */
  .actions .btn-ghost{
    background: rgba(255,255,255,.08);
    color: #e8edf7;
    border:1px solid rgba(255,255,255,.16);
    transition: background .15s ease, border-color .15s ease, filter .15s ease;
  }
  .actions .btn-ghost:hover{
    background: rgba(255,255,255,.12);
    border-color: rgba(255,255,255,.22);
  }

  /* En m√≥vil, ambos ocupan todo el ancho */
  @media (max-width:520px){
    .actions .btn-primary,
    .actions .btn-ghost{ flex:1; width:100%; }
  }

  .forgot-footer{
    margin-top:1.1rem; padding-top:1rem;
    border-top:1px solid rgba(255,255,255,.08);
    text-align:center; color:var(--muted);
  }
  .forgot-footer a{ font-weight:700; }

  @media (max-width:480px){
    .forgot-card{ padding:18px; }
  }
</style>
{% endblock %}

{% block content %}
<div class="forgot-wrap">
  <div class="forgot-card">
    <!-- Logo -->
    <div class="forgot-logo" aria-hidden="true">
      <span style="font-size:2rem">üîë</span>
    </div>

    <h1 class="forgot-title">Recuperar contrase√±a</h1>
    <p class="forgot-sub">Ingres√° tu email o DNI para recibir instrucciones</p>

    {% if errores %}
      <div class="error-box" role="alert">
        <ul>{% for e in errores %}<li>{{ e }}</li>{% endfor %}</ul>
      </div>
    {% endif %}

    {% if exito %}
      <div class="success-box" role="alert">
        {{ exito }}
      </div>
    {% endif %}

    <form class="form" method="post" action="{{ url_for('auth.forgot_password') }}" autocomplete="on" novalidate>
      <!-- Email o DNI -->
      <div class="field">
        <label for="login_id">Email o DNI</label>
        <div class="control">
          <span class="icon">üìß</span>
          <input id="login_id" name="login_id"
                 value="{{ login_id or '' }}"
                 placeholder="tu@email.com o 12345678"
                 required autocomplete="username">
        </div>
      </div>

      <!-- Botones -->
      <div class="actions">
        <a class="btn-ghost" href="{{ url_for('auth.login') }}">‚Üê Volver al login</a>
        <button class="btn-primary" type="submit">Enviar instrucciones ‚Üí</button>
      </div>

      <div class="forgot-footer">
        ¬øRecordaste tu contrase√±a?
        <a href="{{ url_for('auth.login') }}">Iniciar sesi√≥n</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}